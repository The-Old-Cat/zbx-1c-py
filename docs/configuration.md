# Настройка и конфигурация

## Общие параметры

Проект использует систему конфигурации на основе Pydantic Settings, которая позволяет загружать параметры из файла `.env` и переменных окружения. Проект кроссплатформенный и работает на Windows, Linux и macOS.

## Параметры конфигурации

### RAC_PATH
- **Тип**: строка
- **По умолчанию**: ""
- **Описание**: Путь к исполняемому файлу `rac`
- **Пример для Windows**: `C:/Program Files/1cv8/rac.exe`
- **Пример для Linux**: `/opt/1C/v8.3/x.x.x.x/rac`
- **Пример для macOS**: `/Applications/1C/Enterprise Platform/x.x.x.x/rac`

### RAC_HOST
- **Тип**: строка
- **По умолчанию**: "127.0.0.1"
- **Описание**: Хост RAS-сервиса 1С:Предприятия
- **Пример**: `my-1c-server.local`

### RAC_PORT
- **Тип**: целое число
- **По умолчанию**: 1545
- **Описание**: Порт RAS-сервиса 1С:Предприятия (обычно 1541 или 1545)
- **Пример**: 1541

### USER_NAME
- **Тип**: строка
- **По умолчанию**: ""
- **Описание**: Имя пользователя для аутентификации в кластере 1С
- **Пример**: `admin`

### USER_PASS
- **Тип**: строка
- **По умолчанию**: ""
- **Описание**: Пароль пользователя для аутентификации в кластере 1С
- **Пример**: `password123`

### DEBUG
- **Тип**: булево значение
- **По умолчанию**: False
- **Описание**: Флаг включения режима отладки

### LOG_PATH
- **Тип**: строка
- **По умолчанию**: ""
- **Описание**: Путь к директории для хранения лог-файлов
- **Пример для Windows**: `C:\logs\zbx-1c-py\`
- **Пример для Linux/macOS**: `./logs/` или `/var/log/zbx-1c-py/`

## Файл .env

Для удобства настройки рекомендуется создать файл `.env` в корне проекта:

```env
# Пример для Windows
RAC_PATH=C:/Program Files/1cv8/rac.exe
RAC_HOST=127.0.0.1
RAC_PORT=1545
USER_NAME=admin
USER_PASS=password123
DEBUG=false
LOG_PATH=C:\logs\zbx-1c-py\

# Пример для Linux
# RAC_PATH=/opt/1C/v8.3/x.x.x.x/rac
# RAC_HOST=127.0.0.1
# RAC_PORT=1545
# USER_NAME=admin
# USER_PASS=password123
# DEBUG=false
# LOG_PATH=/var/log/zbx-1c-py/
```

**Примечание**: В файле .env можно использовать комментарии для разных операционных систем, раскомментируя нужные строки для вашей ОС.

## Приоритет параметров

Параметры загружаются в следующем порядке приоритета:
1. Переменные окружения
2. Файл `.env`
3. Значения по умолчанию

## Кроссплатформенные особенности

### Разделители пути
- **Windows**: использует обратные слэши `\` или косые слэши `/`
- **Linux/macOS**: использует косые слэши `/`

### Права доступа
- **Linux/macOS**: убедитесь, что исполняемый файл `rac` имеет права на выполнение
- **Windows**: обычно права на выполнение установлены по умолчанию

### Кодировка
- **Windows**: 1С по умолчанию использует CP866
- **Linux/macOS**: обычно используется UTF-8
- Проект автоматически обрабатывает различия в кодировке

## Проверка конфигурации

Для проверки корректности настройки конфигурации можно использовать вспомогательный скрипт:

```bash
# Запуск через entry point (рекомендуемый способ)
uv run check-config

# Альтернативный способ - запуск напрямую
uv run python scripts/check_config.py
```

**Важно**: Все команды должны выполняться через uv для обеспечения изоляции от системного Python и корректной работы с зависимостями проекта.

## Рекомендации по безопасности

- Не храните чувствительные данные (пароли) в открытом виде в репозитории
- Используйте права доступа к файлу `.env` для ограничения доступа
- Регулярно меняйте пароли для аутентификации в кластере
- Проверяйте права доступа к исполняемому файлу `rac`
- Учитывайте различия в системах безопасности между операционными системами