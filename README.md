# zbx-1c-py

–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Zabbix.

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ 1–° (LLD - Low Level Discovery)
- –°–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —Å–µ—Å—Å–∏–π –∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ RAS (Remote Administration Service)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Zabbix —á–µ—Ä–µ–∑ UserParameter

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ 1–° (LLD)
- ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫: —Å–µ—Å—Å–∏–∏, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏, —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ RAS —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ 1–°
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `loguru` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —É—Ä–æ–≤–Ω—è
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `.env`
- ‚úÖ REST API –Ω–∞ FastAPI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows, Linux, macOS)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zbx-1c-py/
‚îú‚îÄ‚îÄ src/zbx_1c/                  # –ì–ª–∞–≤–Ω—ã–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ __main__.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: python -m zbx_1c
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # REST API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.py            # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies.py      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ API
‚îÇ   ‚îú‚îÄ‚îÄ cli/                     # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py          # –ö–æ–º–∞–Ω–¥—ã CLI
‚îÇ   ‚îú‚îÄ‚îÄ core/                    # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Settings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py        # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/              # –ú–æ–¥—É–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cluster/             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.py       # ClusterManager
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ discovery.py     # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infobase/            # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ finder.py        # –ü–æ–∏—Å–∫ –ò–ë
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analyzer.py      # –ê–Ω–∞–ª–∏–∑ –Ω–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitor.py       # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ò–ë
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session/             # –°–µ—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collector.py     # –°–±–æ—Ä —Å–µ—Å—Å–∏–π + CLI
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ filters.py       # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Å—Å–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jobs/                # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reader.py        # –ß—Ç–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server/              # –°–µ—Ä–≤–µ—Ä—ã 1–° (—Ä–µ–∑–µ—Ä–≤)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îî‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ rac_client.py        # RAC –∫–ª–∏–µ–Ω—Ç
‚îÇ       ‚îú‚îÄ‚îÄ converters.py        # –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–≤–æ–¥–∞ rac
‚îÇ       ‚îú‚îÄ‚îÄ fs.py                # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
‚îÇ       ‚îî‚îÄ‚îÄ net.py               # –°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ tests/                       # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ scripts/                     # –°–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ deploy/                  # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îî‚îÄ‚îÄ dev/                     # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ .gitkeep
‚îú‚îÄ‚îÄ data/                        # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îú‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ logs/                        # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îú‚îÄ‚îÄ zabbix/                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zabbix
‚îÇ   ‚îú‚îÄ‚îÄ templates/               # –®–∞–±–ª–æ–Ω—ã Zabbix
‚îÇ   ‚îî‚îÄ‚îÄ userparameters/          # UserParameter –¥–ª—è Zabbix Agent
‚îÇ       ‚îî‚îÄ‚îÄ .gitkeep
‚îú‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pyproject.toml               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ LICENSE
```

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- –£—Ç–∏–ª–∏—Ç–∞ `rac` / `rac.exe` (Remote Administration Console) –¥–ª—è 1–°
- –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è 1–° (RAS)
- –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
uv sync

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ –±–µ–∑ sync
uv pip install -e .

# –ó–∞–ø—É—Å–∫ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
uv run zbx-1c check-ras
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ pip**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
pip install -e .

# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
pip install -e ".[dev]"
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ pip —Å uv**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ uv pip
uv pip install -e ".[dev]"
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```bash
cp .env.example .env
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`, —É–∫–∞–∑–∞–≤ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:

```env
# –ü—É—Ç—å –∫ —É—Ç–∏–ª–∏—Ç–µ rac (—Ä–∞–∑–ª–∏—á–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–°)
# Windows:
# RAC_PATH=C:/Program Files/1cv8/8.3.x.x/bin/rac.exe
# Linux:
# RAC_PATH=/opt/1C/v8.3/x.x.x.x/rac
# macOS:
# RAC_PATH=/Applications/1C/Enterprise Platform/x.x.x.x/rac

# –•–æ—Å—Ç –∏ –ø–æ—Ä—Ç RAS-—Å–µ—Ä–≤–∏—Å–∞
RAC_HOST=127.0.0.1
RAC_PORT=1545

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
USER_NAME=admin
USER_PASS=password

# –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
LOG_PATH=./logs

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
DEBUG=False

# –¢–∞–π–º–∞—É—Ç—ã (—Å–µ–∫—É–Ω–¥—ã)
RAC_TIMEOUT=30
COMMAND_TIMEOUT=60

# –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (—Å–µ–∫—É–Ω–¥—ã)
CACHE_TTL=300
```

---

## ‚ñ∂Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### CLI –∫–æ–º–∞–Ω–¥—ã

#### –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `pip install -e .` –¥–æ—Å—Ç—É–ø–Ω—ã —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø—É—Å–∫–∞ CLI:

**1. –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—ã–µ entry points (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):**

```bash
zbx-1c <command> [options]           # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
zbx-1c-check-ras                      # –ü—Ä–æ–≤–µ—Ä–∫–∞ RAS
zbx-1c-discovery                      # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
zbx-1c-metrics [cluster_id]           # –ú–µ—Ç—Ä–∏–∫–∏
zbx-1c-infobases <cluster_id>         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã
zbx-1c-sessions <cluster_id>          # –°–µ—Å—Å–∏–∏
zbx-1c-jobs <cluster_id>              # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
zbx-1c-test                           # –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
zbx-1c-monitor [cluster_id]           # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∞–ª–∏–∞—Å metrics)
```

**2. –ö–∞–∫ Python-–º–æ–¥—É–ª—å:**

```bash
python -m zbx_1c <command> [options]
```

**3. –ß–µ—Ä–µ–∑ uv (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**

```bash
# –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å –ø–æ–¥–∫–æ–º–∞–Ω–¥–∞–º–∏
uv run zbx-1c <command> [options]
uv run zbx-1c check-ras
uv run zbx-1c discovery
uv run zbx-1c metrics f93863ed-3fdb-4e01-a74c-e112c81b053b

# –û—Ç–¥–µ–ª—å–Ω—ã–µ entry points
uv run zbx-1c-check-ras
uv run zbx-1c-discovery
uv run zbx-1c-metrics [cluster_id]
uv run zbx-1c-infobases <cluster_id>
uv run zbx-1c-sessions <cluster_id>
uv run zbx-1c-jobs <cluster_id>
uv run zbx-1c-test
uv run zbx-1c-monitor [cluster_id]

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
uv run zbx-1c-check-ras --config .env.prod
uv run zbx-1c metrics --config /path/to/.env
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `uv run` –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –≤ —Å—Ä–µ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–µ–∫—Ç –±–µ–∑ —è–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

---

### üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

#### –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

| –ö–æ–º–∞–Ω–¥–∞ | Entry point | –û–ø–∏—Å–∞–Ω–∏–µ | –ê—Ä–≥—É–º–µ–Ω—Ç—ã |
|---------|-------------|----------|-----------|
| `check-ras` | `zbx-1c-check-ras` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ RAS —Å–µ—Ä–≤–∏—Å–∞ | ‚Äî |
| `check-config` | `zbx-1c-check-config` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | ‚Äî |
| `discovery` | `zbx-1c-discovery` | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –¥–ª—è Zabbix LLD | ‚Äî |
| `clusters` | ‚Äî | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ | ‚Äî |
| `infobases` | `zbx-1c-infobases` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑ | `<cluster_id>` |
| `sessions` | `zbx-1c-sessions` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∫–ª–∞—Å—Ç–µ—Ä–∞ | `<cluster_id>` |
| `jobs` | `zbx-1c-jobs` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π | `<cluster_id>` |
| `metrics` | `zbx-1c-metrics` | –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (–¥–ª—è Zabbix) | `[cluster_id]` |
| `status` | `zbx-1c-status` | –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞ | `<cluster_id>` |
| `all` | ‚Äî | –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ | `<cluster_id>` |
| `test` | `zbx-1c-test` | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è | ‚Äî |
| `monitor` | `zbx-1c-monitor` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∞–ª–∏–∞—Å `metrics`) | `[cluster_id]` |

---

### üîç –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

#### `check-ras` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ RAS —Å–µ—Ä–≤–∏—Å–∞

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ç–µ–≤—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ RAS (Remote Administration Service) 1–°.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-check-ras`

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
zbx-1c-check-ras

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
zbx-1c check-ras --config /path/to/.env

# –ö—Ä–∞—Ç–∫–∞—è —Ñ–æ—Ä–º–∞
zbx-1c check-ras -c .env.prod
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
{
  "host": "127.0.0.1",
  "port": 1545,
  "available": true,
  "rac_path": "C:/Program Files/1cv8/8.3.23.1740/bin/rac.exe"
}
```

**–ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞:**
- `0` ‚Äî RAS –¥–æ—Å—Ç—É–ø–µ–Ω
- `1` ‚Äî RAS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –æ—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

#### `check-config` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: –Ω–∞–ª–∏—á–∏–µ rac, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å RAS, –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –ª–æ–≥–æ–≤.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-check-config`

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
zbx-1c-check-config

# –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—É—é –∫–æ–º–∞–Ω–¥—É
zbx-1c check-config

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
zbx-1c check-config --config /path/to/.env
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
============================================================
–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
============================================================

[+] RAC_PATH        - –§–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω: C:/Program Files/1cv8/8.3.27.1786/bin/rac.exe
[+] LOG_PATH        - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞: logs
[+] RAC_HOST        - –•–æ—Å—Ç RAS: 127.0.0.1
[+] RAC_PORT        - –ü–æ—Ä—Ç RAS: 1545
[+] RAS_CONNECTION  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RAS —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
------------------------------------------------------------
–ü—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ: 5/5
:) –í—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞!
```

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `RAC_PATH` | –ù–∞–ª–∏—á–∏–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ rac |
| `LOG_PATH` | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ |
| `RAC_HOST` | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ RAS |
| `RAC_PORT` | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ RAS |
| `RAS_CONNECTION` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RAS —Å–µ—Ä–≤–∏—Å—É |

**–ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞:**
- `0` ‚Äî –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- `1` ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

---

#### `discovery` ‚Äî –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (LLD)

–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã 1–° –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è Zabbix Low Level Discovery.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-discovery`

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
zbx-1c-discovery

# –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—É—é –∫–æ–º–∞–Ω–¥—É
zbx-1c discovery

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
zbx-1c discovery -c /etc/zabbix/.env
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
{
  "data": [
    {
      "id": "f93863ed-3fdb-4e01-a74c-e112c81b053b",
      "name": "Production Cluster",
      "host": "127.0.0.1",
      "port": 1545,
      "status": "unknown"
    },
    {
      "id": "a1234567-89ab-cdef-0123-456789abcdef",
      "name": "Test Cluster",
      "host": "127.0.0.1",
      "port": 1545,
      "status": "unknown"
    }
  ]
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Zabbix:**
```
UserParameter=zbx1cpy.clusters.discovery,zbx-1c-discovery
```

---

#### `clusters` ‚Äî –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ 1–° –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∏–ª–∏ JSON —Ñ–æ—Ä–º–∞—Ç–µ.

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |
| `--json-output` | ‚Äî | –í—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON | `false` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥
zbx-1c clusters

# JSON –≤—ã–≤–æ–¥
zbx-1c clusters --json-output

# –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
zbx-1c clusters -c .env.prod --json-output
```

**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞:**
```
üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã 1–°:

1. Production Cluster
   ID: f93863ed-3fdb-4e01-a74c-e112c81b053b
   Host: 127.0.0.1:1545
   Status: unknown

2. Test Cluster
   ID: a1234567-89ab-cdef-0123-456789abcdef
   Host: 127.0.0.1:1545
   Status: unknown
```

**–ü—Ä–∏–º–µ—Ä JSON –≤—ã–≤–æ–¥–∞:**
```json
[
  {
    "id": "f93863ed-3fdb-4e01-a74c-e112c81b053b",
    "name": "Production Cluster",
    "host": "127.0.0.1",
    "port": 1545,
    "status": "unknown"
  }
]
```

---

#### `infobases <cluster_id>` ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-infobases`

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `cluster_id` | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö –∏–ª–∏ –±–µ–∑) |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑
zbx-1c infobases f93863ed-3fdb-4e01-a74c-e112c81b053b

# –° –∫–∞–≤—ã—á–∫–∞–º–∏ (–µ—Å–ª–∏ ID —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)
zbx-1c infobases "f93863ed-3fdb-4e01-a74c-e112c81b053b"

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-infobases f93863ed-3fdb-4e01-a74c-e112c81b053b

# –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
zbx-1c infobases f93863ed-3fdb-4e01-a74c-e112c81b053b -c .env.prod
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
[
  {
    "infobase": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
    "name": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è",
    "descr": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è",
    "dbms": "MSSQLServer",
    "dbserver": "sql-server",
    "dbname": "1C_ACCOUNTING"
  },
  {
    "infobase": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "name": "–ó–£–ü",
    "descr": "–ó–∞—Ä–ø–ª–∞—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º",
    "dbms": "PostgreSQL",
    "dbserver": "pg-server",
    "dbname": "1C_ZUP"
  }
]
```

---

#### `sessions <cluster_id>` ‚Äî –°–µ—Å—Å–∏–∏

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-sessions`

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `cluster_id` | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
zbx-1c sessions f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-sessions f93863ed-3fdb-4e01-a74c-e112c81b053b
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
[
  {
    "session-id": "1",
    "user": "ADMIN",
    "app": "1CV8C",
    "infobase": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è",
    "host": "192.168.1.100",
    "started-at": "2024-01-15T10:30:00",
    "last-active": "2024-01-15T14:25:00",
    "hibernate": "no"
  },
  {
    "session-id": "2",
    "user": "IVANOV",
    "app": "Designer",
    "infobase": "–ó–£–ü",
    "host": "192.168.1.101",
    "started-at": "2024-01-15T09:00:00",
    "last-active": "2024-01-15T14:20:00",
    "hibernate": "no"
  }
]
```

---

#### `jobs <cluster_id>` ‚Äî –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-jobs`

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `cluster_id` | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π
zbx-1c jobs f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-jobs f93863ed-3fdb-4e01-a74c-e112c81b053b
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
[
  {
    "job-id": "100",
    "infobase": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è",
    "started-at": "2024-01-15T12:00:00",
    "status": "running",
    "description": "–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
  },
  {
    "job-id": "101",
    "infobase": "–ó–£–ü",
    "started-at": "2024-01-15T11:30:00",
    "status": "completed",
    "description": "–†–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã"
  }
]
```

---

#### `metrics [cluster_id]` ‚Äî –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

–ü–æ–ª—É—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ Zabbix. –ï—Å–ª–∏ `cluster_id` –Ω–µ —É–∫–∞–∑–∞–Ω, —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-metrics`

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `cluster_id` | –ù–µ—Ç | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–°. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
zbx-1c metrics f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ú–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
zbx-1c metrics

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-metrics f93863ed-3fdb-4e01-a74c-e112c81b053b
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ (–æ–¥–∏–Ω –∫–ª–∞—Å—Ç–µ—Ä):**
```json
{
  "cluster": {
    "id": "f93863ed-3fdb-4e01-a74c-e112c81b053b",
    "name": "Production Cluster",
    "status": "unknown"
  },
  "metrics": {
    "total_sessions": 15,
    "active_sessions": 12,
    "total_jobs": 3,
    "active_jobs": 1,
    "session_limit": 20,
    "session_percent": 75.0,
    "working_servers": 2,
    "total_servers": 2
  }
}
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ (–≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã):**
```json
[
  {
    "cluster": {
      "id": "f93863ed-3fdb-4e01-a74c-e112c81b053b",
      "name": "Production Cluster",
      "status": "unknown"
    },
    "metrics": {
      "total_sessions": 15,
      "active_sessions": 12,
      "total_jobs": 3,
      "active_jobs": 1,
      "session_limit": 20,
      "session_percent": 75.0,
      "working_servers": 2,
      "total_servers": 2
    }
  },
  {
    "cluster": {
      "id": "a1234567-89ab-cdef-0123-456789abcdef",
      "name": "Test Cluster",
      "status": "unknown"
    },
    "metrics": {
      "total_sessions": 5,
      "active_sessions": 3,
      "total_jobs": 1,
      "active_jobs": 0,
      "session_limit": 10,
      "session_percent": 50.0,
      "working_servers": 1,
      "total_servers": 1
    }
  }
]
```

**–°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `total_sessions` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π |
| `active_sessions` | **–ê–∫—Ç–∏–≤–Ω—ã–µ** —Å–µ—Å—Å–∏–∏ (–¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π: last-active-at ‚â§ 10 –º–∏–Ω –¥–ª—è Designer –∏–ª–∏ ‚â§ 5 –º–∏–Ω –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö, –ª–∏–±–æ hibernate=no + calls ‚â• 1 + bytes ‚â• 1024) |
| `total_jobs` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π |
| `active_jobs` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π (JobScheduler –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ hibernate) |
| `session_limit` | –õ–∏–º–∏—Ç —Å–µ—Å—Å–∏–π (—Å—É–º–º–∞ max-connections –ø–æ –≤—Å–µ–º –ò–ë) |
| `session_percent` | –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π |
| `working_servers` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ 1–° |
| `total_servers` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞ |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Zabbix:**
```
UserParameter=zbx1cpy.metrics[*],zbx-1c-metrics $1
```

---

#### `status <cluster_id>` ‚Äî –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞

–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Zabbix UserParameter.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-status`

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `cluster_id` | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
zbx-1c status f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-status f93863ed-3fdb-4e01-a74c-e112c81b053b

# –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
zbx-1c status f93863ed-3fdb-4e01-a74c-e112c81b053b -c .env.prod
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
available
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `available` ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω (–ø–æ—Ä—Ç –æ—Ç–≤–µ—á–∞–µ—Ç)
- `unavailable` ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ø–æ—Ä—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)
- `unknown` ‚Äî –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–æ—à–∏–±–∫–∞ –∏–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Zabbix:**
```ini
UserParameter=zbx1cpy.cluster.status[*],zbx-1c-status $1
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **Type** | Zabbix agent |
| **Key** | `zbx1cpy.cluster.status[{#ID}]` |
| **Type of information** | Text |
| **Preprocessing** | Map value: available‚Üí1, unavailable‚Üí0, unknown‚Üí2 |

---

#### `all <cluster_id>` ‚Äî –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∞—Å—Ç–µ—Ä–µ: –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–∑—ã, —Å–µ—Å—Å–∏–∏, –∑–∞–¥–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**
| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `cluster_id` | UUID –∫–ª–∞—Å—Ç–µ—Ä–∞ 1–° |

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
zbx-1c all f93863ed-3fdb-4e01-a74c-e112c81b053b

# –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
zbx-1c all f93863ed-3fdb-4e01-a74c-e112c81b053b -c .env.prod
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```json
{
  "cluster": {
    "id": "f93863ed-3fdb-4e01-a74c-e112c81b053b",
    "name": "Production Cluster",
    "host": "127.0.0.1",
    "port": 1545,
    "status": "unknown"
  },
  "infobases": [
    {
      "infobase": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
      "name": "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è"
    }
  ],
  "sessions": [
    {
      "session-id": "1",
      "user": "ADMIN",
      "app": "1CV8C"
    }
  ],
  "jobs": [
    {
      "job-id": "100",
      "status": "running"
    }
  ],
  "statistics": {
    "total_infobases": 3,
    "total_sessions": 15,
    "active_sessions": 12,
    "total_jobs": 3,
    "active_jobs": 1
  },
  "timestamp": "2024-01-15T14:30:00.123456"
}
```

---

#### `test` ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ 1–°: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —É—Ç–∏–ª–∏—Ç—ã `rac`, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å RAS, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-test`

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
zbx-1c test

# –ß–µ—Ä–µ–∑ entry point
zbx-1c-test

# –° –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
zbx-1c test -c .env.prod
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ 1–°...

üìÅ RAC path: C:/Program Files/1cv8/8.3.23.1740/bin/rac.exe
   ‚úÖ RAC executable found

üåê RAS: 127.0.0.1:1545
   ‚úÖ RAS is available

üìä Clusters found: 2
   - Production Cluster (f93863ed-3fdb-4e01-a74c-e112c81b053b)
     ‚úÖ Metrics collected: 15 sessions, 12 active, 3 jobs
   - Test Cluster (a1234567-89ab-cdef-0123-456789abcdef)
     ‚úÖ Metrics collected: 5 sessions, 3 active, 1 jobs

‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
```

**–ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞:**
- `0` ‚Äî –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- `1` ‚Äî –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

---

#### `monitor` ‚Äî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∞–ª–∏–∞—Å `metrics`)

–ê–ª–∏–∞—Å –∫–æ–º–∞–Ω–¥—ã `metrics` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**–°–∏–Ω–æ–Ω–∏–º:** `zbx-1c-monitor`

–°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥—ã [`metrics`](#metrics-cluster_id--–º–µ—Ç—Ä–∏–∫–∏-–∫–ª–∞—Å—Ç–µ—Ä–∞).

---

### üîß –û–±—â–∏–µ –æ–ø—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

| –û–ø—Ü–∏—è | –ö—Ä–∞—Ç–∫–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------|---------|----------|--------------|
| `--config` | `-c` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env` | `.env` |
| `--help` | `-h` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –∏ –≤—ã–π—Ç–∏ | ‚Äî |

---

### üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `.env`

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏).

**–ü—Ä–∏–º–µ—Ä `.env`:**
```env
# –ü—É—Ç—å –∫ —É—Ç–∏–ª–∏—Ç–µ rac
RAC_PATH=C:/Program Files/1cv8/8.3.23.1740/bin/rac.exe

# –•–æ—Å—Ç –∏ –ø–æ—Ä—Ç RAS-—Å–µ—Ä–≤–∏—Å–∞
RAC_HOST=127.0.0.1
RAC_PORT=1545

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
USER_NAME=admin
USER_PASS=password

# –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RAS (—Å–µ–∫—É–Ω–¥—ã)
RAC_TIMEOUT=30

# –¢–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ rac (—Å–µ–∫—É–Ω–¥—ã)
RAC_COMMAND_TIMEOUT=60

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_PATH=./logs
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `RAC_PATH` | –ü—É—Ç—å –∫ —É—Ç–∏–ª–∏—Ç–µ `rac` / `rac.exe` | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –û–° |
| `RAC_HOST` | –•–æ—Å—Ç RAS-—Å–µ—Ä–≤–∏—Å–∞ | `127.0.0.1` |
| `RAC_PORT` | –ü–æ—Ä—Ç RAS-—Å–µ—Ä–≤–∏—Å–∞ | `1545` |
| `USER_NAME` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ | ‚Äî |
| `USER_PASS` | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ | ‚Äî |
| `RAC_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Å–µ–∫) | `30` |
| `RAC_COMMAND_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –∫–æ–º–∞–Ω–¥—ã (—Å–µ–∫) | `60` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `LOG_PATH` | –ü—É—Ç—å –∫ –ª–æ–≥–∞–º | `./logs` |

---

### üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ß–µ—Ä–µ–∑ entry points (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
zbx-1c-check-config
zbx-1c-check-ras
zbx-1c clusters
zbx-1c metrics

# –ß–µ—Ä–µ–∑ uv (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
uv run zbx-1c-check-config
uv run zbx-1c-check-ras
uv run zbx-1c clusters
uv run zbx-1c metrics
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

```bash
# –ß–µ—Ä–µ–∑ entry points
zbx-1c metrics f93863ed-3fdb-4e01-a74c-e112c81b053b
zbx-1c sessions f93863ed-3fdb-4e01-a74c-e112c81b053b
zbx-1c jobs f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ß–µ—Ä–µ–∑ uv
uv run zbx-1c metrics f93863ed-3fdb-4e01-a74c-e112c81b053b
uv run zbx-1c sessions f93863ed-3fdb-4e01-a74c-e112c81b053b
uv run zbx-1c jobs f93863ed-3fdb-4e01-a74c-e112c81b053b
```

#### –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ

```bash
# –ß–µ—Ä–µ–∑ entry points
zbx-1c all f93863ed-3fdb-4e01-a74c-e112c81b053b

# –ß–µ—Ä–µ–∑ uv
uv run zbx-1c all f93863ed-3fdb-4e01-a74c-e112c81b053b
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ß–µ—Ä–µ–∑ entry points
zbx-1c-test

# –ß–µ—Ä–µ–∑ uv
uv run zbx-1c-test
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–¥–ª—è bash)
SESSIONS=$(zbx-1c metrics $CLUSTER_ID | jq '.metrics.active_sessions')

# –ß–µ—Ä–µ–∑ uv
SESSIONS=$(uv run zbx-1c metrics $CLUSTER_ID | jq '.metrics.active_sessions')

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å RAS (–¥–ª—è PowerShell)
$available = (zbx-1c-check-ras | ConvertFrom-Json).available
if ($available) { Write-Host "RAS is up" }

# –ß–µ—Ä–µ–∑ uv
$available = (uv run zbx-1c-check-ras | ConvertFrom-Json).available
if ($available) { Write-Host "RAS is up" }
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏

```bash
# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ
zbx-1c metrics --config .env.prod
uv run zbx-1c metrics --config .env.prod

# –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
zbx-1c discovery -c .env.test
uv run zbx-1c discovery -c .env.test
```

---

### üêõ –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `.env`:

```env
DEBUG=True
LOG_LEVEL=DEBUG
```

–õ–æ–≥–∏ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ `LOG_PATH` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `./logs`).

### REST API

–ó–∞–ø—É—Å–∫ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
uvicorn zbx_1c.api.main:app --reload --host 0.0.0.0 --port 8000
```

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/` | –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç |
| GET | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| GET | `/clusters/discovery` | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (LLD) |
| GET | `/clusters` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ |
| GET | `/clusters/{cluster_id}/metrics` | –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ |
| GET | `/clusters/{cluster_id}/sessions` | –°–µ—Å—Å–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ |
| GET | `/clusters/{cluster_id}/jobs` | –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ |
| GET | `/ras/status` | –°—Ç–∞—Ç—É—Å RAS —Å–µ—Ä–≤–∏—Å–∞ |

---

## üìä –°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

| –ö–ª—é—á | –û–ø–∏—Å–∞–Ω–∏–µ | –ö—Ä–∏—Ç–µ—Ä–∏–∏ |
|------|----------|----------|
| `zbx1cpy.cluster.total_sessions` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π | –í—Å–µ —Å–µ—Å—Å–∏–∏ –∏–∑ `rac session list` |
| `zbx1cpy.cluster.active_sessions` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ **–∞–∫—Ç–∏–≤–Ω—ã—Ö** —Å–µ—Å—Å–∏–π | **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π**:<br>1Ô∏è‚É£ **last-active-at ‚â§ –ø–æ—Ä–æ–≥** ‚Üí –∞–∫—Ç–∏–≤–Ω–∞<br>2Ô∏è‚É£ **last-active-at > –ø–æ—Ä–æ–≥** ‚Üí —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:<br>   ‚Ä¢ `hibernate == "no"`<br>   ‚Ä¢ `calls-last-5min >= 1`<br>   ‚Ä¢ `bytes-last-5min >= 1024 –±–∞–π—Ç`<br><br>**–ü–æ—Ä–æ–≥–∏ –ø–æ —Ç–∏–ø–∞–º**:<br>‚Ä¢ `Designer` (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä): **10 –º–∏–Ω—É—Ç**<br>‚Ä¢ –û—Å—Ç–∞–ª—å–Ω—ã–µ: **5 –º–∏–Ω—É—Ç** |
| `zbx1cpy.cluster.total_jobs` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π | –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –∏–∑ `rac session list` —Å `app-id` = BackgroundJob / SystemBackgroundJob / JobScheduler |
| `zbx1cpy.cluster.active_jobs` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π | **–ü–æ —Ç–∏–ø—É –∑–∞–¥–∞–Ω–∏—è**:<br>‚Ä¢ `JobScheduler`: **–≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω**<br>‚Ä¢ `SystemBackgroundJob`: `hibernate == "no"`<br>‚Ä¢ `BackgroundJob`: `hibernate == "no"` |
| `zbx1cpy.cluster.session_limit` | –õ–∏–º–∏—Ç —Å–µ—Å—Å–∏–π (—Å—É–º–º–∞ –ø–æ –ò–ë) | `max-connections` –ø–æ –≤—Å–µ–º –ò–ë |
| `zbx1cpy.cluster.session_percent` | –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π | `total_sessions / session_limit * 100` |
| `zbx1cpy.cluster.working_servers` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ | –°–µ—Ä–≤–µ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `working` |
| `zbx1cpy.cluster.total_servers` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ | –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∞ |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∞ `active_sessions` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π** –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
> 1. **last-active-at ‚â§ –ø–æ—Ä–æ–≥** ‚Üí —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞ (–±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
> 2. **last-active-at > –ø–æ—Ä–æ–≥** ‚Üí —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (hibernate + calls + bytes)
> 
> **–ü–æ—Ä–æ–≥–∏ last-active-at:**
> - **Designer (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä)**: 10 –º–∏–Ω—É—Ç (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∫–æ–¥ –±–µ–∑ –≤—ã–∑–æ–≤–æ–≤)
> - **–û—Å—Ç–∞–ª—å–Ω—ã–µ**: 5 –º–∏–Ω—É—Ç (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–µ—Å—Å–∏—è)

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π

- Session ID
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Designer, 1CV8C, –∏ —Ç.–¥.)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞
- –•–æ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°—Ç–∞—Ç—É—Å (hibernate)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑

- –ò–º—è –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ò–ë
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π (–≤—Å–µ–≥–æ/–∞–∫—Ç–∏–≤–Ω—ã—Ö)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤
- –û–±—ä–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞
- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è
- –ë–ª–æ—Ä–æ–≤–∫–∏

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zabbix

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zabbix Agent

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
uv sync
# –∏–ª–∏
uv pip install -e .
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ pip**
```bash
pip install -e .
```

#### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ UserParameter

```bash
# –ß–µ—Ä–µ–∑ entry point (–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
zbx-1c-generate-userparam

# –ò–ª–∏ —á–µ—Ä–µ–∑ uv (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
uv run zbx-1c-generate-userparam
```

#### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**Windows (–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):**
```powershell
Copy-Item "zabbix\userparameters\userparameter_1c.conf" `
    -Destination "C:\Program Files\Zabbix Agent 2\zabbix_agent2.d\" -Force
```

**Linux:**
```bash
sudo cp zabbix/userparameters/userparameter_1c.conf /etc/zabbix/zabbix_agentd.d/
```

> **–í–∞–∂–Ω–æ:** –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç–∏ –∫ Python –∏ –ø—Ä–æ–µ–∫—Ç—É –≤ —Ñ–∞–π–ª–µ `userparameter_1c.conf` –ø–æ–¥ –≤–∞—à—É —Å—Ä–µ–¥—É!

#### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Zabbix Agent

**Windows:**
```powershell
Restart-Service "Zabbix Agent 2"
```

**Linux:**
```bash
sudo systemctl restart zabbix-agent
```

#### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# Windows
& "C:\Program Files\Zabbix Agent 2\zabbix_get.exe" -s localhost -k "zbx1cpy.clusters.discovery"
& "C:\Program Files\Zabbix Agent 2\zabbix_get.exe" -s localhost -k "zbx1cpy.cluster.status[f93863ed-3fdb-4e01-a74c-e112c81b053b]"
& "C:\Program Files\Zabbix Agent 2\zabbix_get.exe" -s localhost -k "zbx1cpy.metrics[f93863ed-3fdb-4e01-a74c-e112c81b053b]"

# Linux
zabbix_get -s localhost -k "zbx1cpy.clusters.discovery"
zabbix_get -s localhost -k "zbx1cpy.cluster.status[f93863ed-3fdb-4e01-a74c-e112c81b053b]"
zabbix_get -s localhost -k "zbx1cpy.metrics[f93863ed-3fdb-4e01-a74c-e112c81b053b]"
```

### UserParameter

–§–∞–π–ª `userparameter_1c.conf` —Å–æ–¥–µ—Ä–∂–∏—Ç (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏ –∫ Python):

```conf
# Windows (Zabbix Agent 2)
# –§–æ—Ä–º–∞—Ç: cd /d "–ø—Ä–æ–µ–∫—Ç" && "python.exe" -m zbx_1c <command>
# cd /d –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8

# LLD Discovery: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
UserParameter=zbx1cpy.clusters.discovery,cd /d "g:\Automation\zbx-1c-py" && "g:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c discovery

# –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞ (–¥–ª—è Item Prototype)
UserParameter=zbx1cpy.cluster.status[*],cd /d "g:\Automation\zbx-1c-py" && "g:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c status $1

# –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
UserParameter=zbx1cpy.metrics[*],cd /d "g:\Automation\zbx-1c-py" && "g:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c metrics $1

# –ú–µ—Ç—Ä–∏–∫–∏ –≤—Å–µ—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (–¥–ª—è Master Item)
UserParameter=zbx1cpy.metrics.all,cd /d "g:\Automation\zbx-1c-py" && "g:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c metrics

# –ü—Ä–æ–≤–µ—Ä–∫–∞ RAS
UserParameter=zbx1cpy.ras.check,cd /d "g:\Automation\zbx-1c-py" && "g:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c check-ras
```

**–î–ª—è Linux** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `zbx-1c-generate-userparam --force-os linux`:

```conf
# Linux (Zabbix Agent 2)
PYTHON_EXE=/opt/zbx-1c-py/.venv/bin/python
PROJECT_DIR=/opt/zbx-1c-py

# LLD Discovery
UserParameter=zbx1cpy.clusters.discovery,LANG=C.UTF-8 PYTHONIOENCODING=utf-8 cd "${PROJECT_DIR}" && "${PYTHON_EXE}" -m zbx_1c discovery

# –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞
UserParameter=zbx1cpy.cluster.status[*],LANG=C.UTF-8 PYTHONIOENCODING=utf-8 cd "${PROJECT_DIR}" && "${PYTHON_EXE}" -m zbx_1c status $1

# –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
UserParameter=zbx1cpy.metrics[*],LANG=C.UTF-8 PYTHONIOENCODING=utf-8 cd "${PROJECT_DIR}" && "${PYTHON_EXE}" -m zbx_1c metrics $1
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Ç–µ–∫—É—â–µ–π –û–°
zbx-1c-generate-userparam

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è Linux
zbx-1c-generate-userparam --force-os linux

# –°–≤–æ–π –ø—É—Ç—å –≤—ã–≤–æ–¥–∞
zbx-1c-generate-userparam -o /etc/zabbix/zabbix_agent2.d/userparameter_1c.conf
```

**–í–∞–∂–Ω–æ:** 
- Windows: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `cd /d` –≤–º–µ—Å—Ç–æ `chcp 65001` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏
- Linux: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LANG=C.UTF-8 PYTHONIOENCODING=utf-8` –¥–ª—è UTF-8 –≤—ã–≤–æ–¥–∞

### –ò–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–∞ Zabbix

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ `zabbix/templates/template.xml`
2. –°–≤—è–∂–∏—Ç–µ —à–∞–±–ª–æ–Ω —Å —Ö–æ—Å—Ç–æ–º
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–∞–∫—Ä–æ—Å—ã (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ LLD (Low Level Discovery) —Å –∫–ª—é—á–æ–º `zbx1cpy.clusters.discovery`.

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
uv run pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
uv run pytest --cov=zbx_1c

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
uv run pytest tests/test_basic.py -v

# –° verbose –≤—ã–≤–æ–¥–æ–º
uv run pytest -v
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ pytest**
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=zbx_1c

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_basic.py -v
```

---

## üì¶ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
uv build

# –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è
uv build && uv publish
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ build**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
python -m build

# –ò–ª–∏ —á–µ—Ä–µ–∑ uv
uv build
```

---

## üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –ê—É–¥–∏—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
uv run pip-audit

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
uv run ruff check src
uv run pyright src
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫**
```bash
# –ê—É–¥–∏—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
pip-audit

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
ruff check src
pyright src
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`git push origin feature/amazing-feature`)
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

---

