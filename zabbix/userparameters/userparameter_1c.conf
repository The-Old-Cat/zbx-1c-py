# ===========================================
# Для Windows (Zabbix Agent 2)
# ===========================================
# Сгенерировано: 2026-02-18 18:01:47
# OS: Windows
# Zabbix Agent: agent
# Project root: G:\Automation\zbx-1c-py
# Python: G:\Automation\zbx-1c-py\.venv\Scripts\python.exe
# ===========================================
# Установка:
#   Windows: Копировать в C:\Program Files\Zabbix Agent 2\zabbix_agent2.d\
#   Linux:   Копировать в /etc/zabbix/zabbix_agent2.d/
#
# Перезапуск агента:
#   Windows: Restart-Service zabbix-agent2
#   Linux:   sudo systemctl restart zabbix-agent2
#
# Проверка:
#   zabbix_get -s <host> -k zbx1cpy.clusters.discovery
# ===========================================

# ===========================================
# UserParameter для мониторинга кластеров 1С
# ===========================================
# Mode: Python Module с полным путём
# ===========================================

# LLD Discovery: обнаружение кластеров
UserParameter=zbx1cpy.clusters.discovery,cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c discovery

# Статус кластера: available | unavailable | unknown
UserParameter=zbx1cpy.cluster.status[*],cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c status $1

# Метрики кластера (сессии, задания)
UserParameter=zbx1cpy.metrics[*],cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c metrics $1

# Метрики всех кластеров (для Master Item)
UserParameter=zbx1cpy.metrics.all,cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c metrics

# Проверка доступности RAS
UserParameter=zbx1cpy.ras.check,cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c check-ras

# Тестовый параметр
UserParameter=zbx1cpy.test,cd /d "G:\Automation\zbx-1c-py" && "G:\Automation\zbx-1c-py\.venv\Scripts\python.exe" -m zbx_1c test
